---
title: HTTP系列 -- 网络 与 IP
date: 2018-01-19 07:59:03
tags: HTTP
---
# 概述
HTTP协议的底层是由 **TCP 协议**和 **IP 协议**（简称**TCP/IP**）构建的。HTTP只规定了请求格式和相应格式，即如何书写内容的协议。

# TCP（Transmission Control Protocol）
TCP 是传输控制协议，它规定了如何传输协议。

### TCP 和 UDP 的区别是什么
- TCP 可靠、面向连接、相对 UDP 较慢
- UDP 不可靠，不面向连接、相对 TCP 较快。

### TCP 的三次握手指的是什么
每次建立连接前，客户端和服务端之前都要先进行三次对话才开始正式传输内容，三次对话大概是这样的：
```
1. 客户端：我要连接你了，可以吗
2. 服务端：嗯，我准备好了，连接我吧
3. 客户端：那我连接你咯。
4. 开始后面步骤
```
通过上述对话，从而确定了双方都可以收发内容。

# IP（Internet Protocol）
IP 是网络协议，它规定了如何联网协议。

### 相关知识点
1. 只要在互联网中，那么就会有一个 IP。IP 分为**内网 IP** 和**外网 IP**。

2. 内网：以路由器为核心的以及所有连接路由器的设备统称为内网

3. 外网：以路由器为出口的外面的网络都是外网

4. 服务商提供 DNS 服务（告知你你想要请求的域名所对应的 IP
 地址）

5. 路由器可以广播出来 WIFI ，连接之后便可以上网

6. 路由器连接服务商的服务器，那么路由器就会有一个**外网IP**，表示用户在**互联网**中的地址

7. 如果重启路由器，则有可能会重新分配**外网IP**，所以**路由器没有固定的外网IP**

8. 可以租用**固定的外网IP**，从而为用户提供稳定的服务（eg. 阿里、腾讯等公司）

9. 内网中的设备使用**内网IP**，一般来说这个 IP 的格式都是**192.168.xxx.xxx**

10. 一般路由会给自己分配一个好记的**内网 IP**，如*192.168.1.1*。之后给每个设备分配不同的**内网IP**

11. 路由器会有两个IP，分别是**内网IP**和**外网IP**

12. 内网中的设备可以互相访问（比如你可以用电脑或手机进入[http://192.168.1.1](http://192.168.1.1/ "null")来查看你的路由器**「因为路由器内置一个HTTP服务器」**），但是不能**直接**访问外网，内网设备想要访问外网，就必须经过路由器中转

13. 外网中的设备可以互相访问（比如 qq.com 可以把首页发送给你的路由器，你的路由器有**外网 IP**），但是外网中的设备无法访问你的内网设备（这很好理解，内网是一个封闭的网络，外人进不来，所以实际上 qq.com 无法直接把首页放送给你的电脑和手机）

14. 路，就是「必由之路」中的路。由，就是「必由之路」中的由（由是经过、缘由的意思）。所有的信息都要经过路由器，然后被指向一条它该去的路

15. **内网**和**外网**通过**路由器**连接

16. **本地IP：127.0.0.1**：表示设备本身

17. hosts：可以设置任意域名对应的IP

18. hosts文件中会有一行`127.0.0.1 localhost`，意思就是 **localhost** 指向 **127.0.0.1**，所以 **localhost** 也表示设备本身

19. 特别特殊的 IP：`0.0.0.0`，它不表示任何设备。这个 IP 不同的地方含义不同

20. 使用 HTTP 协议访问另一个 IP 时，比如同时提供 IP 和端口号，缺一不可。如果没有提供，浏览器会加上默认端口号80。


# 端口（port）
端口其实就是一个编号。一个服务器（硬件）不一定只提供一种服务，比如一个服务器既提供 HTTP 服务（网页服务），又提供 FTP 服务（文件下载服务），还提供 SMTP 服务（邮件服务），那么只用一个 IP 是无法告诉服务器你想要使用哪种服务，所以**一个端口对应一个服务**，是固定的。

### 端口服务
1. 提供 **HTTP 服务** ==> **80 端口**

2. 提供 **HTTPS 服务** ==> **443 端口**

3. 提供 **FTP 服务** ==> **21 端口**

4. 提供**代理服务器端口** ==> **1080端口**

### 端口基础
每个机器一共有 65535（2的16次方减1）个端口（这是协议规定的）。不过这些端口的使用有一些规定
1. 0 到 1023（2的10次方减1）号端口是留给系统使用的，你只有拥有了管理员权限后，才能使用这 1024 个端口

2. 其他端口可以给普通用户使用

3. 如果一个端口正在提供服务，也就是被占用了，那么就不能再使用这个端口。除非你先停掉正在占用这个端口的服务。