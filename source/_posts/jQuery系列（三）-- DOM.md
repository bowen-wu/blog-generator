---
title: jQuery系列（三） -- DOM
date: 2018-01-29 08:24:55
tags: jQuery
---
# 创建元素与属性
JavaScript：
   - 创建元素：` document.createElement() `
   - 设置属性：` setAttribute() `
   - 添加文本：` innerHTML() `
   - 加入文档：` append() `

jQuery：
   - 创建元素节点：` $( 'html结构' ) `
   - 创建文本节点：` $( '<div>text node</div>' ) `
   - 创建属性节点：` $( '<div id="text" class="className">text node</div>' ) `

# jQuery DOM API
### DOM node 插入
1. 内部插入
   - ` .append(content) ` ==> 向每个匹配的元素内部追加内容。前面是被插入的对象，后面是要在对象内插入的元素内容 
   - ` .appendTo(obj) ` ==>  把所有的匹配元素追加到另一个指定的元素集合中。前面是要插入的元素内容，而后面是被插入的对象

2. 外部插入
    -  ` .after(content) ` ==> 在匹配元素集合中的每个元素后面插入参数所指定的内容，作为其兄弟节点
    -  ` before(content) ` ==> 在匹配的元素的前面插入内容

3. 内部插入
    -  ` .prepend() ` ==> 向每个匹配的元素内部前置内容
    -  ` .prependTo() ` ==> 把所有匹配的元素前置到另一个指定的元素集合中

**说明：**` .peopend() ` 方法将指定元素插入到匹配元素里面作为他的第一个子元素。` .append() ` 方法最为最后一个参数。

4. 外部插入：content 在前，() 内为元素
    -  ` .insertAfter() ` ==> 在目标元素后面插入集合中每个匹配的元素
    -  ` .insertBefore() ` ==> 在目标元素前面插入集合中每个匹配的元素

### DOM node 删除
-  ` .empty() ` ==> 移除指定元素的所有子节点
-  ` .remove() ` ==> 将自身移除，同时也会移除元素内部的一切，包括绑定的事件及与该元素相关的 jQuery 数据
**注意：**` .remove() ` 可以传递一个选择器表达式用来过滤将被移除的匹配元素集合，可以选择性地删除节点
-  ` .detach() ` ==> 保留数据的删除操作。让一个 web 元素托管，即从当前页面中移除该元素，但保留这个元素的内存模型对象
**注意：**` .detach() ` 方法是 jQuery 特有的，所以它只能处理通过 jQuery 的方法绑定的事件或者数据，可以通过 ` .append() ` 是删除的元素重新回到文档流中

### DOM node 复制与替换
-  ` .clone() ` ==> 复制所有匹配的元素集合，包括所有匹配元素、匹配元素的下级元素和文字节点
**注意：**若节点有事件或者数据之类的其他处理，我们需要通过 ` .clone(true) ` 传递一个布尔值 ` true ` 用来指定，这样不仅仅是简单的克隆节点结构，还把附带的事件与数据复制。

-  ` .replaceWith(newContent) ` ==> 用提供的内容替换集合中所有匹配的元素并且返回被删除元素的集合
-  ` .replaceAll(target) ` ==> 用集合的匹配元素替换每个目标元素
**注意：**
    1.  ` .replaceWith() ` 和 ` .replaceAll() ` 会删除与节点相关联的所有数据和 event handler
    2. ` .replaceWith() ` 返回 jQuery 对象，可链式使用，但返回的 jQuery 对象引用的是替换前的节点，而不是通过 ` .replaceWith() / .replaceAll() ` 方法替换后的节点

-  ` .wrap() ` ==> 将元素用其他元素包裹起来，即给元素增加一个父元素，返回原始的元素集，以便以后使用链式方法
-  ` .unwrap() ` ==> 将匹配的元素的父级元素删除，保留自身在原来的位置
-  ` .wrapAll() ` ==> 将集合中的元素用其他元素包裹起来，增加一个父元素（每个元素分别包裹）
-  ` .wrapInner() ` ==> 将集合中的元素内部所有的子元素用其他元素包裹起来，并当做指定元素的子元素

### jQuery 遍历
-  ` .children() ` ==> 返回匹配元素集合中每个元素的所有子元素，并且可以接受一个选择器

-  ` .find() ` ==> 查找 DOM 树中元素的后代元素（只在后代中遍历，不包括自己）
-  ` .parent() ` ==> 查找集合中每一个元素的父元素
-  ` .parents() ` ==> 查找集合中每一个元素的祖辈元素
-  ` .closest() ` ==> 从元素本身开始，在 DOM 树上逐级向上元素匹配，并返回最先匹配的祖先元素
**注意：**` .parents() ` 和 ` .closest() ` 区别
    1. 起始位置不同：` .parents() ` 开始于父元素； ` .closest() ` 开始于当前元素
    2. 遍历的目标不同：` .parents() ` 一直查找到根元素，并将匹配的元素加入集合； ` .closest() ` 向上查找，直到找到一个匹配的就停止查找
    3. 结果不同：` .parents() ` 返回的是包含0个或1个或多个元素的 jQuery 对象； ` .closest() ` 返回的是包含0个或1个元素的 jQuery 对象

-  ` .next() ` ==> 查找指定元素集合中每一个元素紧邻的后面同辈元素的元素集合
-  ` .prev() ` ==> 查找指定元素集合中每一个元素紧邻的前面同辈元素的元素集合
-  ` .siblings() ` ==> 查找指定元素集合中每一个元素的同辈元素
-  ` .add() ` ==> 创建一个新的 jQuery 对象，元素添加到匹配的元素集合中
-  ` .each() ` ==> 一个 for 循环的迭代器，迭代 jQuery 对象中的每一个 DOM 元素，每次回调函数执行时，会传递当前循环次数作为参数（从0开始）
    ` .each() ` 通过回调的方式处理，并且会有两个固定的实参 ==> 索引（index）和元素（element）
    ` .each( (index,element) => {} ) `